---
title: File Picker
description: Using the file-picker machine in your project.
package: "@zag-js/file-picker"
---

# File Picker

File picker component is used to pick multiple files.

The native input file element is quite difficult to style and doesn't provide a
drag-n-drop version.

> The file picker component doesn't handle the actual file uploading process. It
> only handles the UI and the state of the file picker.

<Resources pkg="@zag-js/file-picker" />

<Showcase id="filePicker" />

**Features**

- Supports a button to open the file dialog.
- Supports drag and drop to pick files.
- Set the maximum number of files that can be picked.
- Set the maximum size of the files that can be picked.
- Set the accepted file types.

## Installation

To use the file picker machine in your project, run the following command in
your command line:

<CodeSnippet id="file-picker/installation.mdx" />

This command will install the framework agnostic file picker logic and the
reactive utilities for your framework of choice.

## Anatomy

To set up the file picker correctly, you'll need to understand its anatomy and
how we name its parts.

> Each part includes a `data-part` attribute to help identify them in the DOM.

<Anatomy id="file-picker" />

On a high level, the file picker consists of:

- **Root**: The root element of the file picker.
- **Dropzone**: The element that handles the drag and drop functionality.
- **Input**: The visually hidden input element.
- **Trigger**: The element that triggers the file picker.
- **Delete Trigger**: The element that triggers the deletion of a file.

## Usage

First, import the file picker package into your project

```jsx
import * as filePicker from "@zag-js/file-picker"
```

The file picker package exports two key functions:

- `machine` â€” The state machine logic for the file picker widget.
- `connect` â€” The function that translates the machine's state to JSX attributes
  and event handlers.

Next, import the required hooks and functions for your framework and use the
file uplaod machine in your project ðŸ”¥

<CodeSnippet id="file-picker/usage.mdx" />

## Setting the accepted file types

Use the `accept` attribute to set the accepted file types.

```jsx
const [state, send] = useMachine(
  filePicker.machine({
    accept: "image/*",
  }),
)
```

## Setting the maximum number of files

Use the `maxFiles` attribute to set the maximum number of files that can be
picked. This will set the `multiple` attribute on the underlying input element.

```jsx
const [state, send] = useMachine(
  filePicker.machine({
    maxFiles: 5,
  }),
)
```

## Setting the maximum size per file

Use the `maxFileSize` attribute to set the maximum size per file that can be
picked.

```jsx
const [state, send] = useMachine(
  filePicker.machine({
    maxFileSize: 1024 * 1024 * 10, // 10MB
  }),
)
```

## Listening to file picker events

When files are picked, the `onChange` callback is invoked with the details of
the accepted and rejected files.

```jsx
const [state, send] = useMachine(
  filePicker.machine({
    onChange: (details) => {
      console.log(details.acceptedFiles) // File[]
      console.log(details.rejectedFiles) // { file: File, errors: [] }
    },
  }),
)
```

## Usage within a form

To use the file picker within a form, set the `name` attribute in the machine's
context, and ensure you render the input element `api.hiddenInputProps`

```jsx
const [state, send] = useMachine(
  filePicker.machine({
    name: "avatar",
  }),
)
```

## Displaying image preview

To display a preview of the picked image, use the built-in FileReader API to
read the file and set the `src` attribute of an image element.

```jsx
const [state, send] = useMachine(
  filePicker.machine({
    onChange: (details) => {
      const reader = new FileReader()
      reader.onload = (event) => {
        const image = event.target.result
        // set the image as the src of an image element
      }
      reader.readAsDataURL(details.acceptedFiles[0])
    },
  }),
)
```

## Disabling drag and drop

To disable the drag and drop functionalty, set the `allowDrop` context property
to `false`.

```jsx
const [state, send] = useMachine(
  filePicker.machine({
    allowDrop: false,
  }),
)
```

## Styling guide

Earlier, we mentioned that each file picker part has a `data-part` attribute
added to them to select and style them in the DOM.

```css
[data-part="root"] {
  /* styles for root element*/
}

[data-part="dropzone"] {
  /* styles for root element*/
}

[data-part="trigger"] {
  /* styles for file picker trigger */
}

[data-part="label"] {
  /* styles for the input's label */
}
```

### Dragging State

When the user drags a file over the file picker, the `data-dragging` attribute
is added to the root element.

```css
[data-part="dropzone"] [data-dragging] {
  /* styles for when the user is dragging a file over the file picker */
}
```

### Disabled State

When the file picker is disabled, the `data-disabled` attribute is added to the
root element.

```css
[data-part="root"] [data-disabled] {
  /* styles for when the file picker is disabled */
}

[data-part="dropzone"] [data-disabled] {
  /* styles for when the file picker is disabled */
}

[data-part="trigger"] [data-disabled] {
  /* styles for when the file picker trigger is disabled */
}

[data-part="label"] [data-disabled] {
  /* styles for when the file picker label is disabled */
}
```

## Methods and Properties

The file picker's `api` method exposes the following methods:

<ApiTable name="file-picker" />
